{% load bootstrap3 %}
{# in an iframe, hence the duplication of stuff #}
<html>
    <head>
        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script type="text/javascript" src="/static/tiny_mce/tiny_mce_popup.js"></script>
        {{ form.media }}
        {% bootstrap_css %}
        {% include 'autocomplete_light/static.html' %}
    </head>
    <body>
        <form>
        {{ form }}
        <input id="add-glossary-item" type="submit"/>
        </form>
        <script>
            // Get the parameters passed into the window from the top frame
            // var args = top.tinymce.activeEditor.windowManager.getParams();
            // console.log(args.arg1, args.arg2);
            $('#add-glossary-item').bind('click', function(){
                var image_url = $('#id_link').val();

                // in case you are using a real popup window
                //window.opener.tinymce.activeEditor.selection.setContent(image_url);

                // in case you use a modal dialog
                tinymce.activeEditor.selection.setContent(image_url);
                tinyMCEPopup.close();

                return false;
            });
        </script>
    </body>
</html>